<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/home.css') }}">
  <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  <style>
  .user-icon {
    width: 50px;
    height: 50px;
    margin-right: 10px;
  }
  
  /* Add styles for selected user display */
  #selected-user {
    margin-top: 20px;
    font-weight: bold;
  }
</style>
</head>
<body>
  <img src="{{url_for('static', filename='user_l.png')}}" alt="Logo" class="user-icon">
  
  
  <div class="container">
    <h1>Call Player</h1>
    
    <!-- Choose an Existing File -->
    <div class="option-block">
      <div class="option-heading" onclick="toggleOption('pre-loaded')">
        <h2>Choose an Existing File</h2>
      </div>
      <div class="option-content" id="pre-loaded">
        <ul class="file-list">
          {% for filename in filenames %}
            <a href="call_{{ loop.index }}"><li>{{ filename }}</li></a>
          {% endfor %}
        </ul>
      </div>
    </div>
    
    <!-- Upload a new audio file -->
    <div class="option-block">
      <div class="option-heading" onclick="toggleOption('upload-file')">
        <h2>Upload a new audio file</h2>
        <span class="toggle-icon">+</span>
      </div>
      <div id="upload-file" class="option-content">
        <form method="POST" action="/upload" enctype="multipart/form-data" id="form">
          <input type="file" name="wavfile" accept=".mp3, .wav">
          <input type="submit" id="button" value="Upload" onclick="start()">
        </form>
      </div>
    </div>
    
    <!-- Processing Div -->
    <div id="processing">
      <img src="{{ url_for('static', filename='processing.gif') }}" id="img" alt="Processing the image">
      <p>Processing...</p>
    </div>
  </div>

  <script>
    function toggleOption(id) {
      var optionContent = document.getElementById(id);
      var toggleIcon = optionContent.previousElementSibling.getElementsByClassName('toggle-icon')[0];

      if (optionContent.style.display === 'block') {
        optionContent.style.display = 'none';
        toggleIcon.textContent = '+';
      } else {
        optionContent.style.display = 'block';
        toggleIcon.textContent = '-';
      }
    }

    function start() {
      var form = document.getElementById("form");
      var processingDiv = document.getElementById("processing");
      form.hidden = true;
      processingDiv.style.display = "block";
    }
   
  </script>
</body>
</html>

